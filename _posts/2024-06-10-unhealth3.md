---
title: "The UnHealth Dashboard: Part 3"
date: 2024-06-10 12:00:00 +0000
categories: [Plotly Dash, Public Health, Dashboard, Python]
tags: [Dash App, Portfolio, UnHealth Dashboard, UnHealth Score, CDC PLACES]
---

# The UnHealth Score

I wanted to build a Dashboard related to public health for a portfolio project. 

Eventually, this became [The UnHealth Dashboard](https://bit.ly/UnHealthDashboard). 

It's deployed on Heroku so if the app is asleep it may take about 20 seconds to wake up.

This post is the third in a series, explaining the process of creating the **UnHealth Score**, which allows for direct comparison between counties in one summary statistic.

The GitHub repo for this project is here: [The UnHealth Dashboard Repo](https://github.com/SloughJE/UnHealth_Dashboard/)

## Why?

The dataset I was working with had more than 30 health metrics. In order to compare counties, I wanted to make something like an "overall health status score". 

This would also allow me to rank counties based on their overall health status.

Eventually, I had the idea to create a score that a higher value meant the county was more unhealthy, as most of the data was set up that way. For example, the rate of diabetes. Higher is worse. 

## Accounting for Impact 

Some health metrics were more clearly more impactful than others. 

For example, the metric "No cholesterol screening among adults aged >=18 years" is clearly less impactful than "Coronary heart disease among adults aged >=18 years". 

To deal with this, I created an `impact score`, which is simply a number for 1 to 5 (5 being most impactful), indicating the seriousness or impact of the metric on the overall health of the country. 

How did I determine the specific impact value for a health metric? 

My 'expert' knowledge, common sense, and logic. 

Yes, it is subjective. Here are a few examples. 

```python
    "Chronic kidney disease among adults aged >=18 years": 5,
    "Cognitive disability among adults ages >=18 years": 5,
    "Mobility disability among adults aged >=18 years": 4,
    "High blood pressure among adults aged >=18 years": 4,
    "High cholesterol among adults aged >=18 years who have been screened in the past 5 years": 2,
    "Sleeping less than 7 hours among adults aged >=18 years": 2,
    "No dental visit in past year among adults aged >=18 years": 1,
    "No cholesterol screening among adults aged >=18 years": 1
```

Generally I aimed to define the health metrics that indicated a current health issue as most impactful as opposed to a more preventative type metric. I am aware that this could indicate serious future health problems, however I feel that this score should reflect the state of the county when the data was gathered. 

## Normalization and Normalization Procedure

### Within Health Measure Normalization

Each health measure's values are first scaled within their specific group (health measure) to a scale of 0 to 100. 

This ensures that all health measures contribute equally to the overall health assessment, regardless of their original value ranges. 

Why is this necessary?

Let's imagine we have two health metrics: `No cholesterol screening among adults aged >=18 years` and `Chronic kidney disease among adults aged >=18 years`. 

For all counties, the `No cholesterol screening` rate varies from 20% to 75% (hypothetically).
For all counties, the `Chronic kidney disease` rate varies from 2% to 5% (hypothetically).

That means that the in the best county, 20% of people have not gotten a cholesterol screening. 

If we just calculated a weighted score by just multiplying the percentages by the impact score, the metrics with naturally higher percentages would overwhelm those with lower percentages. 

In other words, even if we weight the `Chronic kidney disease` as a 5 and `No cholesterol screening` as a 1, because the cholesterol screening percentages are up to 75%, that could result in `No cholesterol screening` having much more impact on overall county health. 

So we must first scale each metric based on the min and max of counties in the dataset. 

For `No cholesterol screening`, 20% would be scaled to 0 an 75% would be scaled to 100.

For `Chronic kidney disease`, 2% would be scaled to 0 an 5% would be scaled to 100.

**The math:**

Normalization formula:

$$ 
\begin{equation}
D_{i,j}^{\text{norm}} = \frac{D_{i,j} - \min(D_i)}{\max(D_i) - \min(D_i)} \times 100 
\end{equation}
$$

where D<sub>i,j</sub> is the value of health measure i for county j.


### Weighted Score Calculation
Next, each scaled value is multiplied by its respective impact score to calculate the weighted score for each county. 

This step defines the varying importance of different health measures.

$$ 
\begin{equation}
W_j = \sum_{i} (D_{i,j}^{\text{norm}} \times w_i) 
\end{equation}
$$

where w<sub>i</sub> is the impact score of health measure i.

As an example, county Kusilvak, has `No cholesterol screening` of 50%. After Normalization, it has a value of 54.55. This would just be multiplied by 1 (the impact score) to get the `Weighted Score`.


## Overall UnHealth Score Normalization


To create the final UnHealth Score, the weighted scores for each county are then summed up:

$$ 
\begin{equation}
    W_j = \sum_{i} (D_{i,j}^{\text{norm}} \times w_i) 
\end{equation}
$$

where w<sub>i</sub> is the impact score of health measure i.

And normalized again to produce the UnHealth Score on a standardized 0 to 100 scale across all counties.

$$ 
\begin{equation}
U_j = \frac{W_j - \min(W)}{\max(W) - \min(W)} \times 100 
\end{equation}
$$


Extending our example, with the county Kusilvak with a `No cholesterol screening` of 54.55 (scaled), we can imagine that adding up the Weighted scores for all the health measures of this county results in the value of 2,5668.35. 

After we do that for all counties, we then scale that data from 0 to 100. Our final UnHealth score for that county could be 55, indicating that Kusilvak is somewhere near the middle of the pack.

Now we can compare all counties health status based on one metric: The UnHealth Score.

## Visualization of the UnHealth Score

In the UnHealth Dashboard, I include a County tab which looks at the data in detail for a specific county. 

The details include data on all the health measures for a chosen county, and how they contribute to the overall UnHealth Score. 

<img src="media/2024-06-10/unhealth_breakdown.png" alt="Local Image" title="UnHealth Score Breakdown">

This chart shows the data for Kusilvak. The left horizontal bar chart shows the actual percentages for each health measure, color coded by category. Category comes directly from the CDC data.

The stacked bar chart on the right shows how these categories contribute to the overall UnHealth Score. 
Here, the UnHealth Score is 100. The category of Health Risk Behaviors contributes 9.21 points to this value. Health Outcomes contributes 43.25 points. 

Note that I am not using `Categories` in the calculation. They are only shown here to make it easier to see what contributes to the UnHealth Score. 

However, if you hover over an individual health measure, you can see in the tooltip how much that individual health measure contributes to the UnHealth Score.

Here, you can see that 42.8% of adults in Kusilvak currently smoke, and this contributes 4.04 points to the UnHealth score for this county.

The UnHealth Score of 100 for Kusilvak indicates that it is the worst county in the United States for all the health metrics we have in this dataset. 

By looking at this breakdown, we can see in detail why this is the case. 

---

That was the creation of the UnHealth Score.

I hope it makes sense and that it helps understand the overall health status of a county. 

JS